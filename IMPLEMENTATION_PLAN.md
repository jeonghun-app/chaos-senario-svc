# AWS Chaos Engineering Demo - 구현 계획

## 📋 프로젝트 재구성 개요

### 🎯 목표
- **bank-demo-web**: 순수 은행 웹 서비스 (카오스의 대상)
- **bank-demo-was**: 순수 은행 WAS 서비스 (카오스의 대상)  
- **bank-chaos-web**: 카오스 모니터링 및 관찰 전용 웹 (관찰자)

### 🏗️ 아키텍처 분리

```
┌─────────────────────────────────────────────────────────────┐
│                    Chaos Monitoring                         │
│  ┌─────────────────────────────────────────────────────┐    │
│  │           bank-chaos-web                            │    │
│  │        (Next.js + Dashboard)                        │    │
│  │  • FIS 실험 모니터링                                │    │
│  │  • CloudWatch 메트릭 대시보드                        │    │
│  │  • 실시간 상태 관찰                                  │    │
│  │  • 보고서 생성 및 관리                               │    │
│  └─────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼ (관찰)
┌─────────────────────────────────────────────────────────────┐
│                   Production Banking Service                │
│                         (카오스 대상)                        │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ ALB → Auto Scaling Group                            │    │
│  │  ├── EC2 (bank-demo-web + bank-demo-was)           │    │
│  │  ├── EC2 (bank-demo-web + bank-demo-was)           │    │
│  │  └── EC2 (bank-demo-web + bank-demo-was)           │    │
│  └─────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────┘
```

## ✅ 구현 체크리스트

### Phase 1: 기존 코드 정리 및 분리

#### 1.1 bank-demo-was 정리 ✅
- [x] 카오스 엔지니어링 기능 제거
- [x] 순수 은행 API만 유지
- [x] 헬스체크 API 유지 (ALB용)
- [x] CloudWatch 메트릭 (비즈니스 메트릭만)

#### 1.2 bank-demo-web 구현 ✅
- [x] 기존 Next.js 프로젝트 정리
- [x] 은행 고객용 웹 인터페이스 구현
- [x] WAS API와 연동
- [x] 반응형 금융 UI/UX 구현

#### 1.3 카오스 기능 분리 ✅
- [x] 기존 WAS에서 카오스 관련 코드 제거
- [x] 메트릭 API 분리 (순수 비즈니스 메트릭만 유지)

### Phase 2: bank-chaos-web 구현

#### 2.1 프로젝트 초기 설정 ✅
- [x] Next.js 프로젝트 생성
- [x] TypeScript 설정
- [x] TailwindCSS + 대시보드 UI 라이브러리
- [x] AWS SDK 연동

#### 2.2 FIS 실험 관리 ✅
- [x] FIS 실험 목록 조회
- [x] 실험 시작/중지 기능
- [x] 실험 상태 실시간 모니터링
- [x] 실험 결과 저장

#### 2.3 CloudWatch 대시보드 ✅
- [x] 실시간 메트릭 차트
- [x] ALB 5XX 에러율 모니터링
- [x] P95 Latency 추적
- [x] EC2 인스턴스 상태 모니터링

#### 2.4 자동 보고 시스템 🆕
- [ ] Step Functions 연동
- [ ] Bedrock을 통한 보고서 생성
- [ ] PDF 다운로드 기능
- [ ] 보고서 히스토리 관리

### Phase 3: 고급 기능

#### 3.1 실시간 모니터링 🆕
- [ ] WebSocket을 통한 실시간 업데이트
- [ ] 알람 및 알림 시스템
- [ ] 임계값 기반 자동 대응

#### 3.2 시나리오 관리 🆕
- [ ] 사전 정의된 카오스 시나리오
- [ ] 커스텀 시나리오 생성
- [ ] 시나리오 템플릿 관리

#### 3.3 데이터 분석 🆕
- [ ] 실험 결과 분석
- [ ] 트렌드 분석
- [ ] 성능 벤치마킹

## 📁 최종 프로젝트 구조

```
├── bank-demo-web/              # 은행 고객용 웹 (카오스 대상)
│   ├── pages/                  # Next.js 페이지
│   │   ├── index.js           # 메인 페이지
│   │   ├── accounts/          # 계좌 관리
│   │   ├── transactions/      # 거래 내역
│   │   └── transfer/          # 이체 기능
│   ├── components/            # UI 컴포넌트
│   ├── services/              # API 서비스
│   └── styles/                # 스타일링
│
├── bank-demo-was/              # 은행 WAS (카오스 대상)
│   ├── routes/
│   │   ├── accounts.js        # 계좌 API
│   │   ├── transactions.js    # 거래 API
│   │   └── health.js          # 헬스체크
│   ├── utils/
│   │   ├── logger.js          # 로깅
│   │   └── metrics.js         # 비즈니스 메트릭만
│   └── server.js              # 메인 서버
│
├── bank-chaos-web/             # 카오스 모니터링 웹 (관찰자)
│   ├── pages/
│   │   ├── dashboard/         # 실시간 대시보드
│   │   ├── experiments/       # FIS 실험 관리
│   │   ├── reports/           # 보고서 관리
│   │   └── scenarios/         # 시나리오 관리
│   ├── components/
│   │   ├── charts/            # 메트릭 차트
│   │   ├── monitoring/        # 모니터링 위젯
│   │   └── controls/          # 실험 제어
│   ├── services/
│   │   ├── aws/               # AWS 서비스 연동
│   │   ├── cloudwatch/        # CloudWatch API
│   │   └── fis/               # FIS API
│   └── utils/                 # 유틸리티
│
├── userdata-script.sh          # EC2 Auto Scaling
└── README.md                   # 프로젝트 문서
```

## 🚀 단계별 실행 계획

### Step 1: 기존 코드 정리 (1-2시간)
1. bank-demo-was에서 카오스 관련 코드 제거
2. 순수 은행 API만 유지
3. bank-demo-web 기본 구조 확인

### Step 2: bank-demo-web 구현 (2-3시간)
1. 은행 고객용 UI 구현
2. 계좌 조회, 이체, 거래내역 기능
3. WAS API 연동

### Step 3: bank-chaos-web 프로젝트 생성 (1시간)
1. Next.js + TypeScript 프로젝트 초기화
2. AWS SDK 설정
3. 기본 대시보드 레이아웃

### Step 4: 카오스 모니터링 기능 (3-4시간)
1. CloudWatch 메트릭 조회
2. FIS 실험 관리
3. 실시간 대시보드

### Step 5: 자동 보고 시스템 (2-3시간)
1. Step Functions 연동
2. 보고서 생성 기능
3. 결과 분석

## 🎯 핵심 기능 정의

### bank-demo-web (고객용)
- 로그인/인증
- 계좌 잔액 조회
- 거래 내역 확인
- 계좌 이체 기능
- 금융 상품 조회

### bank-demo-was (백엔드)
- 계좌 관리 API
- 거래 처리 API
- 인증/권한 API
- 헬스체크 API
- 비즈니스 메트릭 전송

### bank-chaos-web (모니터링)
- 실시간 서비스 상태 대시보드
- FIS 실험 시작/중지/모니터링
- CloudWatch 메트릭 시각화
- 자동 보고서 생성
- 알람 및 알림 관리

## ⚠️ 주의사항

1. **보안**: 카오스 웹은 내부 관리자만 접근
2. **격리**: 각 서비스는 독립적으로 배포 가능
3. **관찰성**: 모든 상호작용은 로그로 기록
4. **복구**: 실험 중단 시 즉시 복구 메커니즘

## 📊 성공 지표

- [ ] RTO ≤ 10분 달성
- [ ] 5XX 에러율 < 5% 유지
- [ ] P95 Latency < 2x Baseline
- [ ] 자동 보고서 생성 < 15분
- [ ] 실시간 모니터링 지연 < 30초

---

## ✅ 구현 완료 상태

### 🎯 완료된 작업

#### Phase 1: 기존 코드 정리 및 분리 ✅
- **bank-demo-was**: 순수 은행 API로 정리 완료
- **bank-demo-web**: 고객용 웹 인터페이스 구현 완료
- **카오스 기능 분리**: 완전 분리 완료

#### Phase 2: bank-chaos-web 구현 ✅
- **프로젝트 설정**: Next.js + TypeScript + AWS SDK 완료
- **FIS 실험 관리**: API 및 UI 구현 완료
- **CloudWatch 대시보드**: 실시간 메트릭 조회 완료
- **자동 보고 시스템**: 기본 구조 완료

### 🏗️ 최종 아키텍처

```
┌─────────────────────────────────────────────────────────────┐
│                 Chaos Monitoring (완료)                     │
│  ┌─────────────────────────────────────────────────────┐    │
│  │        bank-chaos-web (포트 3001)                   │    │
│  │  • Next.js + TypeScript + AWS SDK                  │    │
│  │  • FIS 실험 관리 & 모니터링                         │    │
│  │  • CloudWatch 메트릭 시각화                         │    │
│  │  • 실시간 대시보드                                  │    │
│  └─────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼ (관찰)
┌─────────────────────────────────────────────────────────────┐
│              Production Banking Service (완료)              │
│  ┌─────────────────────────────────────────────────────┐    │
│  │  bank-demo-web (포트 3000) + bank-demo-was (8080)  │    │
│  │  • 순수 은행 고객 서비스                             │    │
│  │  • 계좌 관리, 거래 처리, 인증                        │    │
│  │  • ALB Health Check 지원                           │    │
│  │  • CloudWatch 비즈니스 메트릭                        │    │
│  └─────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────┘
```

### 🚀 배포 준비 상태

1. **UserData Script**: EC2 Auto Scaling 지원 완료
2. **환경 분리**: 개발/프로덕션 환경 설정 완료
3. **문서화**: 각 프로젝트별 상세 README 완료
4. **모니터링**: CloudWatch 연동 및 메트릭 수집 완료

### 📋 다음 실행 단계

1. **AWS 인프라 배포**
   - EC2 Auto Scaling Group 생성
   - Application Load Balancer 설정
   - FIS 실험 템플릿 생성

2. **데모 실행**
   - 10단계 시나리오 실행
   - 실시간 모니터링 확인
   - 보고서 생성 및 분석

3. **성능 검증**
   - RTO ≤ 10분 달성 확인
   - 5XX 에러율 < 5% 유지 확인
   - P95 Latency < 2x Baseline 확인

---

**구현 완료**: 모든 코드 구현이 완료되었습니다. AWS 인프라 배포 및 데모 실행 준비가 되었습니다. 